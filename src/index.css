@import "tailwindcss";

/* Wolfe Word Book Theme Colors */
@theme {
  --color-primary: #0080BB;
  --color-secondary: #87D9FF;
  --color-secondary-2: #CEEAF9;
  --color-tertiary: #F3FBFF;
  --color-grey: #D9D9D9;
  --color-grey-darker: #9B9B9B;
  --color-black: #000000;
  --color-white: #FFFFFF;
  --color-orange: #FF5900;
  --color-orange-yellow: #FFC800;
  --color-green: #22d850;
  /* A consistent, theme-aligned shadow color. Using a semi-transparent version of the primary color ensures cross-browser consistency. */
  --color-shadow: rgba(0, 128, 187, 0.3);
  /* The shadow input was for inputs in wordcard initially, but now it seems that we don't need it anymore. */
  --shadow-input: inset 1px 3px 4px 0 rgba(0, 0, 0, 0.25);
  --shadow-play-button: 0px 1px 2px rgba(0, 0, 0, 0.25);
  --shadow-timer: 0 0px 4px 3px rgba(0, 0, 0, 0.05);
  --content-width: 89%;
  --content-width-2: 86%;

  /* Pulse keyframes */
  @keyframes pulse {
    0%   { transform: translate(-50%, -50%) scale(1);   opacity: 1;   }
    50%  { transform: translate(-50%, -50%) scale(1.4); opacity: 0.7; }
    100% { transform: translate(-50%, -50%) scale(1);   opacity: 0;   }
  }
}

/* Hide scrollbars for all browsers */
* {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/*Define and animate a custom angle property (--border-angle) for spinning conic gradient effects. Used in .btn-animated-wrapper to create a rotating border animation.*/
@property --border-angle {
  syntax: '<angle>';
  inherits: false;
  initial-value: 0deg;
}

@keyframes border-spin {
  from {
    --border-angle: 0deg;
  }
  to {
    --border-angle: 360deg;
  }
}

@layer components {
  .btn-disabled {
    /* Updated padding to px-6 py-2.5 for larger button size - matches .btn-animated for consistency */
    @apply px-6 py-2.5 rounded-full text-lg font-medium transition-colors shadow-md mx-auto bg-gray-300 text-white cursor-not-allowed;
  }
  .btn-animated-wrapper {
    /* Gradient border wrapper with thinner border (p-1) and fixed min-height to prevent layout shift */
    @apply rounded-full p-1 mx-auto shadow-md min-h-[3.5rem] flex items-center [animation:border-spin_1.3s_linear_infinite];
    background: conic-gradient(from var(--border-angle), #ec4899 0%, #3b82f6 25%, #facc15 50%, #22c55e 75%, #ec4899 100%);
    transition: opacity 0.3s ease-in-out;
  }
  .btn-animated-wrapper.border-transparent {
    opacity: 0;
  }
  .btn-animated-wrapper.border-visible {
    opacity: 1;
  }
  .btn-animated {
    /* Enlarged button with larger padding and text size to match .btn-disabled */
    @apply w-full px-6 py-2.5 rounded-full text-lg font-medium transition-colors bg-[var(--color-secondary)] text-white hover:bg-[var(--color-secondary-2)];
  }

  /* Liquid Glass Effect for play button and selected options */
  .glass-effect {
    position: relative;
    width: 100%;
    border-radius: 45px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    
    /* Flex properties to center content */
    display: flex;
    align-items: center;
    justify-content: center;

    /* Base gradient using theme colors */
    background-image: linear-gradient(180deg, var(--color-secondary) 0%, var(--color-primary) 100%);

    /* Combined shadows for inner and outer depth */
    box-shadow: 
        inset 5px 5px 15px rgba(255, 255, 255, 0.5),
        0 10px 25px -5px var(--color-shadow), 
        0 8px 10px -6px var(--color-shadow);

    /* Edge reflection border */
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .glass-effect:active {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 
        inset 5px 5px 15px rgba(255, 255, 255, 0.5),
        0 20px 30px -5px var(--color-shadow), 
        0 10px 15px -6px var(--color-shadow);
  }

  /* The main reflection highlight */
  .glass-effect::before {
    content: '';
    position: absolute;
    top: -50px;
    left: -50px;
    width: 150px;
    height: 150px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.9), transparent 60%);
    filter: blur(30px);
    opacity: 0.8;
    transition: transform 0.5s ease;
  }

  .glass-effect:active::before {
    transform: scale(1.2);
  }

  /* Play button specific styles */
  .glass-play-button {
    /* Height is 1/3 of parent's height, assuming parent has defined height */
    height: calc(100% / 3);
    margin: 0 auto;
  }

  /* Content container for glass effect */
  .glass-content {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  /* Play button SVG styles */
  .glass-play-svg {
    width: 40%;
    height: 40%;
    fill: var(--color-white);
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    transition: transform 0.3s ease;
  }
  
  .glass-effect:active .glass-play-svg {
    transform: scale(1.1);
  }

  /* Glowing text animation for the Chinese prompt */
  .animated-glow-wrapper {
    position: relative;
    overflow: hidden;
    display: inline-block; /* Ensures the pseudo-element is contained within the text width */
  }

  .animated-glow-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%; /* Start off-screen to the left */
    width: 100%;
    height: 100%;
    /* Create the glowing line effect using a linear gradient */
    background: linear-gradient(to right, transparent, var(--color-tertiary), transparent);
    /* Apply the animation: glow-line (defined below), 4 seconds duration, linear timing, infinite loop */
    animation: glow-line 4s linear infinite;
  }

  /* Keyframes for the glowing line animation */
  @keyframes glow-line {
    0% {
      left: -100%; /* Start completely off-screen to the left */
    }
    100% {
      left: 100%; /* Move completely off-screen to the right */
    }
  }

  .word-card-style {
    border-radius: 30px;
    background: var(--color-tertiary);
    box-shadow: 15px 15px 30px var(--color-shadow);
    border: 3px solid var(--color-white);
    transition: transform 0.3s ease, opacity 0.3s ease;
  }

  /* CSS-only active card detection using scroll-driven animations */
  @supports (animation-timeline: scroll()) {
    .word-card-container {
      animation: detect-active linear;
      animation-timeline: scroll(inline nearest);
      animation-range: contain;
    }
    
    @keyframes detect-active {
      0%, 100% { 
        opacity: 0.7;
        transform: scale(0.95);
      }
      40%, 60% { 
        opacity: 1;
        transform: scale(1);
      }
    }
  }

  /* Fallback for browsers without scroll-driven animations */
  @supports not (animation-timeline: scroll()) {
    .word-card-container {
      position: relative;
    }
    
    .word-card-container .word-card-style {
      opacity: 0.7;
      transform: scale(0.95);
    }
    
    /* Use IntersectionObserver-like behavior with scroll-snap */
    @media (hover: none) and (pointer: coarse) {
      .snap-center .word-card-style {
        animation: fade-in 0.3s ease forwards;
      }
      
      @keyframes fade-in {
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
    }
  }

  /* Timer wrapper with darker shadow for better visibility */
  .timer-shadow-style {
    border-radius: 30px;
    background: var(--color-tertiary);
    /* Darker shadow using color-grey for better visibility against page background */
    box-shadow: 5px 5px 15px var(--color-shadow);
    border: 3px solid var(--color-white);
  }

  /* Nav bar styling matching word card design */
  .nav-bar-style {
    border-radius: 30px;
    background: var(--color-tertiary);
    box-shadow: 15px 15px 30px var(--color-shadow);
    border: 3px solid var(--color-white);
  }

  /* Timer wrapper styling matching word card design */
  .timer-wrapper-style {
    border-radius: 30px;
    background: var(--color-tertiary);
    box-shadow: 15px 15px 30px var(--color-shadow);
    border: 3px solid var(--color-white);
  }

  /* Main container style for the app layout */
  .main-container-style {
    /* Applies an inner shadow to the top of the container, matching the word card's shadow style */
    box-shadow: inset 0px 15px 30px var(--color-shadow);
  }

  /* Option button styles for Chinese meaning selection */
  .option-button {
    @apply flex items-center gap-2 p-3 rounded-lg transition-all duration-200 font-medium text-left w-full;
    background: var(--color-white);
    border: 2px solid var(--color-grey);
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
  }

  .option-button:hover:not(:disabled) {
    @apply scale-105;
    border-color: var(--color-secondary);
  }

  .option-default {
    color: var(--color-black);
  }

  .option-selected {
    background: var(--color-secondary);
    border-color: var(--color-secondary);
    color: var(--color-white);
    box-shadow: 0 0 15px rgba(135, 217, 255, 0.4);
  }

  .option-disabled {
    @apply cursor-not-allowed opacity-60;
  }

  .option-label {
    @apply font-bold text-sm;
    min-width: 20px;
  }

  .option-text {
    @apply flex-1;
  }
}
